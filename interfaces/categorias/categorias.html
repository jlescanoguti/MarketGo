<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Categor√≠as de Productos</title>
  <link rel="stylesheet" href="../categorias/categorias.css">
</head>
<body>
    <header class="navbar">
    <div class="logo">üõí <span>MarketGo</span></div>
    <div class="nav-actions">
      <button onclick="location.href=''" class="signin-btn">Volver</button>
    </div>
  </header>
  <main class="main-content">
    <!-- B√∫squeda y Filtros -->
    <!-- Barra buscadora -->
<section class="filter-bar">
  <input type="text" id="searchInput" placeholder="Buscar por producto, tienda o categor√≠a...">
  <button id="searchBtn" class="btn">Buscar</button>
  <button id="openFilters" class="btn">Filtros Avanzados</button>
</section>

<!-- Modal de Filtros -->
<section id="advancedFilters" class="modal hidden">
  <h3>Filtros Avanzados</h3>

  <label>Categor√≠a:
    <select id="filterCategory">
      <option value="">Todas</option>
      <option value="frutas">Frutas</option>
      <option value="tuberculos">Tub√©rculos</option>
      <option value="envasados">Envasados</option>
      <option value="lacteos">L√°cteos</option>
      <option value="panaderia">Panader√≠a</option>
      <option value="bebidas">Bebidas</option>
      <option value="limpieza">Limpieza</option>
      <option value="snacks">Snacks</option>
    </select>
  </label>

  <label>Subcategor√≠a:
    <select id="filterSubcategory">
      <option value="">Todas</option>
    </select>
  </label>

  <label>Tienda:
    <select id="filterStore">
      <option value="">Todas</option>
      <option value="Fruter√≠a Central">Fruter√≠a Central</option>
      <option value="Bodega Don Pepe">Bodega Don Pepe</option>
      <option value="Tienda El Ahorro">Tienda El Ahorro</option>
      <option value="Mercado San Jos√©">Mercado San Jos√©</option>
    </select>
  </label>

  <!-- Sliders de rango -->
  <div class="range-group">
    <label>Precio (S/): <span id="priceRangeLabel">0 - 50</span></label>
    <input type="range" id="priceMin" min="0" max="50" value="0">
    <input type="range" id="priceMax" min="0" max="50" value="50">
  </div>

  <div class="range-group">
    <label>Peso (kg): <span id="weightRangeLabel">0 - 5</span></label>
    <input type="range" id="weightMin" min="0" max="5" value="0" step="0.1">
    <input type="range" id="weightMax" min="0" max="5" value="5" step="0.1">
  </div>

  <div class="range-group">
    <label>Distancia (km): <span id="distanceRangeLabel">0 - 10</span></label>
    <input type="range" id="distanceMin" min="0" max="10" value="0" step="0.1">
    <input type="range" id="distanceMax" min="0" max="10" value="10" step="0.1">
  </div>

  <button id="applyFilters" class="btn">Aplicar Filtros</button>
  <button id="closeFilters" class="btn">Cerrar</button>
</section>


    <!-- Contenedor de productos -->
    <section class="products-container" id="productsContainer">
      <!-- Aqu√≠ van los productos como los que te mostr√© antes -->
      <div class="product-card" data-category="frutas" data-store="Fruter√≠a Central" data-price="3.5" data-weight="1" data-distance="1.2">
        <img src="img/manzana.jpg" alt="Manzana Roja">
        <h3>Fruter√≠a Central</h3>
        <p><strong>Producto:</strong> Manzana Roja</p>
        <p><strong>Precio:</strong> S/ 3.50</p>
        <p><strong>Distancia:</strong> 1.2 km</p>
        <p><strong>Peso:</strong> 1 kg</p>
        <div class="card-actions">
          <button class="btn select">Seleccionar</button>
          <button class="btn info">Ver m√°s</button>
        </div>
      </div>
      <!-- Agrega m√°s productos como antes -->
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2025 MarketGo. Todos los derechos reservados.</p>
  </footer>

  <!-- Script -->
  <script>
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const products = document.querySelectorAll('.product-card');
    const modal = document.getElementById('advancedFilters');
    const openFilters = document.getElementById('openFilters');
    const closeFilters = document.getElementById('closeFilters');
    const applyFilters = document.getElementById('applyFilters');

    // Buscar por texto
    searchBtn.addEventListener('click', () => {
      const query = searchInput.value.toLowerCase().trim();
      products.forEach(card => {
        const category = card.dataset.category.toLowerCase();
        const store = card.dataset.store.toLowerCase();
        const content = card.textContent.toLowerCase();
        if (content.includes(query) || store.includes(query) || category.includes(query)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });

    // Abrir/Cerrar filtros avanzados
    openFilters.onclick = () => modal.classList.remove('hidden');
    closeFilters.onclick = () => modal.classList.add('hidden');

    // Aplicar filtros avanzados
    // Actualiza etiquetas de rango
function updateRangeLabels() {
  document.getElementById('priceRangeLabel').textContent = `${priceMin.value} - ${priceMax.value}`;
  document.getElementById('weightRangeLabel').textContent = `${weightMin.value} - ${weightMax.value}`;
  document.getElementById('distanceRangeLabel').textContent = `${distanceMin.value} - ${distanceMax.value}`;
}

['priceMin', 'priceMax', 'weightMin', 'weightMax', 'distanceMin', 'distanceMax'].forEach(id => {
  document.getElementById(id).addEventListener('input', updateRangeLabels);
});

applyFilters.addEventListener('click', () => {
  const cat = categorySelect.value;
  const subcat = subcategorySelect.value;
  const store = document.getElementById('filterStore').value.toLowerCase();
  const priceMinVal = parseFloat(document.getElementById('priceMin').value);
  const priceMaxVal = parseFloat(document.getElementById('priceMax').value);
  const weightMinVal = parseFloat(document.getElementById('weightMin').value);
  const weightMaxVal = parseFloat(document.getElementById('weightMax').value);
  const distMinVal = parseFloat(document.getElementById('distanceMin').value);
  const distMaxVal = parseFloat(document.getElementById('distanceMax').value);

  products.forEach(card => {
    const cardCat = card.dataset.category;
    const cardSubcat = card.dataset.subcategory?.toLowerCase();
    const cardStore = card.dataset.store.toLowerCase();
    const cardPrice = parseFloat(card.dataset.price);
    const cardWeight = parseFloat(card.dataset.weight);
    const cardDist = parseFloat(card.dataset.distance);

    const match =
      (!cat || cardCat === cat) &&
      (!subcat || cardSubcat === subcat) &&
      (!store || cardStore.includes(store)) &&
      cardPrice >= priceMinVal && cardPrice <= priceMaxVal &&
      cardWeight >= weightMinVal && cardWeight <= weightMaxVal &&
      cardDist >= distMinVal && cardDist <= distMaxVal;

    card.style.display = match ? 'block' : 'none';
  });

  modal.classList.add('hidden');
});

updateRangeLabels(); // Inicializa etiquetas
  </script>

  <script>
  const categorySelect = document.getElementById('filterCategory');
  const subcategorySelect = document.getElementById('filterSubcategory');

  const subcategories = {
    frutas: ['Manzana', 'Pl√°tano', 'Naranja'],
    tuberculos: ['Papa', 'Yuca', 'Olluco'],
    envasados: ['At√∫n', 'Salsa de tomate', 'Conservas'],
    lacteos: ['Leche', 'Queso', 'Yogur'],
    panaderia: ['Pan franc√©s', 'Pan integral'],
    bebidas: ['Agua', 'Gaseosa', 'Jugo'],
    limpieza: ['Jab√≥n', 'Detergente'],
    snacks: ['Galletas', 'Chips']
  };

  // Actualizar subcategor√≠as seg√∫n categor√≠a seleccionada
  categorySelect.addEventListener('change', () => {
    const selectedCat = categorySelect.value;
    subcategorySelect.innerHTML = '<option value="">Todas</option>';

    if (subcategories[selectedCat]) {
      subcategories[selectedCat].forEach(sub => {
        const opt = document.createElement('option');
        opt.value = sub.toLowerCase();
        opt.textContent = sub;
        subcategorySelect.appendChild(opt);
      });
    }
  });

  // Aplicar filtros con subcategor√≠a y tienda
  applyFilters.addEventListener('click', () => {
    const cat = categorySelect.value;
    const subcat = subcategorySelect.value;
    const store = document.getElementById('filterStore').value.toLowerCase();
    const price = parseFloat(document.getElementById('filterPrice').value);
    const weight = parseFloat(document.getElementById('filterWeight').value);
    const distance = parseFloat(document.getElementById('filterDistance').value);

    products.forEach(card => {
      const cardCat = card.dataset.category;
      const cardSubcat = card.dataset.subcategory?.toLowerCase();
      const cardStore = card.dataset.store.toLowerCase();
      const cardPrice = parseFloat(card.dataset.price);
      const cardWeight = parseFloat(card.dataset.weight);
      const cardDist = parseFloat(card.dataset.distance);

      const catMatch = !cat || cardCat === cat;
      const subcatMatch = !subcat || cardSubcat === subcat;
      const storeMatch = !store || cardStore.includes(store);
      const priceMatch = isNaN(price) || cardPrice <= price;
      const weightMatch = isNaN(weight) || cardWeight <= weight;
      const distanceMatch = isNaN(distance) || cardDist <= distance;

      if (catMatch && subcatMatch && storeMatch && priceMatch && weightMatch && distanceMatch) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });

    modal.classList.add('hidden');
  });
</script>

</body>
</html>