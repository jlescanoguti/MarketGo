<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Categorías de Productos</title>
  <link rel="stylesheet" href="../categorias/categorias.css">
</head>
<body>
    <header class="navbar">
    <div class="logo">🛒 <span>MarketGo</span></div>
    <div class="nav-actions">
      <button onclick="location.href=''" class="signin-btn">Volver</button>
    </div>
  </header>
  <main class="main-content">
    <!-- Búsqueda y Filtros -->
    <!-- Barra buscadora -->
<section class="search-and-filters">
  <!-- Buscador principal -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Buscar por producto, tienda o categoría...">
    <button id="searchBtn" class="btn">Buscar</button>
  </div>

  <!-- Filtros secundarios -->
  <div class="filters-row">
    <button id="openFilters" class="btn filtro-avanzado">🛠 Filtros Avanzados</button>

    <div class="quick-filters">
      <button class="quick-filter" data-filter="frutas">🍎 Frutas</button>
      <button class="quick-filter" data-filter="tuberculos">🥔 Tubérculos</button>
      <button class="quick-filter" data-filter="envasados">🥫 Envasados</button>
      <button class="quick-filter" data-filter="bebidas">🥤 Bebidas</button>
      <button class="quick-filter" data-filter="lacteos">🧀 Lácteos</button>
      <button class="quick-filter" data-filter="panaderia">🍞 Panadería</button>
      <button class="quick-filter" data-filter="limpieza">🧼 Limpieza</button>
      <button class="quick-filter" data-filter="snacks">🍪 Snacks</button>
    </div>
  </div>
</section>



    <!-- Contenedor de productos -->
    <section class="products-container" id="productsContainer">
      <!-- Aquí van los productos como los que te mostré antes -->
      <div class="product-card" data-category="frutas" data-store="Frutería Central" data-price="3.5" data-weight="1" data-distance="1.2">
        <img src="img/manzana.jpg" alt="Manzana Roja">
        <h3>Frutería Central</h3>
        <p><strong>Producto:</strong> Manzana Roja</p>
        <p><strong>Precio:</strong> S/ 3.50</p>
        <p><strong>Distancia:</strong> 1.2 km</p>
        <p><strong>Peso:</strong> 1 kg</p>
        <div class="card-actions">
          <button class="btn select">Seleccionar</button>
          <button class="btn info">Ver más</button>
        </div>
      </div>
      <!-- Agrega más productos como antes -->
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2025 MarketGo. Todos los derechos reservados.</p>
  </footer>                   

  <!-- Script -->
  <script>
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const products = document.querySelectorAll('.product-card');
    const modal = document.getElementById('advancedFilters');
    const openFilters = document.getElementById('openFilters');
    const closeFilters = document.getElementById('closeFilters');
    const applyFilters = document.getElementById('applyFilters');

    // Buscar por texto
    searchBtn.addEventListener('click', () => {
      const query = searchInput.value.toLowerCase().trim();
      products.forEach(card => {
        const category = card.dataset.category.toLowerCase();
        const store = card.dataset.store.toLowerCase();
        const content = card.textContent.toLowerCase();
        if (content.includes(query) || store.includes(query) || category.includes(query)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });

    // Abrir/Cerrar filtros avanzados
    openFilters.onclick = () => modal.classList.remove('hidden');
    closeFilters.onclick = () => modal.classList.add('hidden');

    // Aplicar filtros avanzados
    // Actualiza etiquetas de rango
function updateRangeLabels() {
  document.getElementById('priceRangeLabel').textContent = `${priceMin.value} - ${priceMax.value}`;
  document.getElementById('weightRangeLabel').textContent = `${weightMin.value} - ${weightMax.value}`;
  document.getElementById('distanceRangeLabel').textContent = `${distanceMin.value} - ${distanceMax.value}`;
}

['priceMin', 'priceMax', 'weightMin', 'weightMax', 'distanceMin', 'distanceMax'].forEach(id => {
  document.getElementById(id).addEventListener('input', updateRangeLabels);
});

applyFilters.addEventListener('click', () => {
  const cat = categorySelect.value;
  const subcat = subcategorySelect.value;
  const store = document.getElementById('filterStore').value.toLowerCase();
  const priceMinVal = parseFloat(document.getElementById('priceMin').value);
  const priceMaxVal = parseFloat(document.getElementById('priceMax').value);
  const weightMinVal = parseFloat(document.getElementById('weightMin').value);
  const weightMaxVal = parseFloat(document.getElementById('weightMax').value);
  const distMinVal = parseFloat(document.getElementById('distanceMin').value);
  const distMaxVal = parseFloat(document.getElementById('distanceMax').value);

  products.forEach(card => {
    const cardCat = card.dataset.category;
    const cardSubcat = card.dataset.subcategory?.toLowerCase();
    const cardStore = card.dataset.store.toLowerCase();
    const cardPrice = parseFloat(card.dataset.price);
    const cardWeight = parseFloat(card.dataset.weight);
    const cardDist = parseFloat(card.dataset.distance);

    const match =
      (!cat || cardCat === cat) &&
      (!subcat || cardSubcat === subcat) &&
      (!store || cardStore.includes(store)) &&
      cardPrice >= priceMinVal && cardPrice <= priceMaxVal &&
      cardWeight >= weightMinVal && cardWeight <= weightMaxVal &&
      cardDist >= distMinVal && cardDist <= distMaxVal;

    card.style.display = match ? 'block' : 'none';
  });

  modal.classList.add('hidden');
});

updateRangeLabels(); // Inicializa etiquetas
  </script>

  <script>
  const categorySelect = document.getElementById('filterCategory');
  const subcategorySelect = document.getElementById('filterSubcategory');

  const subcategories = {
    frutas: ['Manzana', 'Plátano', 'Naranja'],
    tuberculos: ['Papa', 'Yuca', 'Olluco'],
    envasados: ['Atún', 'Salsa de tomate', 'Conservas'],
    lacteos: ['Leche', 'Queso', 'Yogur'],
    panaderia: ['Pan francés', 'Pan integral'],
    bebidas: ['Agua', 'Gaseosa', 'Jugo'],
    limpieza: ['Jabón', 'Detergente'],
    snacks: ['Galletas', 'Chips']
  };

  // Actualizar subcategorías según categoría seleccionada
  categorySelect.addEventListener('change', () => {
    const selectedCat = categorySelect.value;
    subcategorySelect.innerHTML = '<option value="">Todas</option>';

    if (subcategories[selectedCat]) {
      subcategories[selectedCat].forEach(sub => {
        const opt = document.createElement('option');
        opt.value = sub.toLowerCase();
        opt.textContent = sub;
        subcategorySelect.appendChild(opt);
      });
    }
  });

  // Aplicar filtros con subcategoría y tienda
  applyFilters.addEventListener('click', () => {
    const cat = categorySelect.value;
    const subcat = subcategorySelect.value;
    const store = document.getElementById('filterStore').value.toLowerCase();
    const price = parseFloat(document.getElementById('filterPrice').value);
    const weight = parseFloat(document.getElementById('filterWeight').value);
    const distance = parseFloat(document.getElementById('filterDistance').value);

    products.forEach(card => {
      const cardCat = card.dataset.category;
      const cardSubcat = card.dataset.subcategory?.toLowerCase();
      const cardStore = card.dataset.store.toLowerCase();
      const cardPrice = parseFloat(card.dataset.price);
      const cardWeight = parseFloat(card.dataset.weight);
      const cardDist = parseFloat(card.dataset.distance);

      const catMatch = !cat || cardCat === cat;
      const subcatMatch = !subcat || cardSubcat === subcat;
      const storeMatch = !store || cardStore.includes(store);
      const priceMatch = isNaN(price) || cardPrice <= price;
      const weightMatch = isNaN(weight) || cardWeight <= weight;
      const distanceMatch = isNaN(distance) || cardDist <= distance;

      if (catMatch && subcatMatch && storeMatch && priceMatch && weightMatch && distanceMatch) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });

    modal.classList.add('hidden');
  });
</script>

<script>
  document.querySelectorAll('.quick-filter').forEach(button => {
    button.addEventListener('click', () => {
      const category = button.dataset.filter;
      products.forEach(product => {
        product.style.display = product.dataset.category === category ? 'block' : 'none';
      });
    });
  });
</script>

</body>
</html>